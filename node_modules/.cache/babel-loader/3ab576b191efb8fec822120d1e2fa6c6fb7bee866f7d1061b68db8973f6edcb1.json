{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState } from \"vuex\";\nimport PlayAll from \"@/components/userComponents/home/PlayAll.vue\";\nexport default {\n  name: \"UserHeader\",\n  components: {\n    PlayAll\n  },\n  data() {\n    return {\n      searchContain: \"\",\n      activeIndex: this.$route.path,\n      accountData: null,\n      searchContext: ''\n    };\n  },\n  computed: {\n    ...mapState([\"userInfo\"])\n  },\n  methods: {\n    handleSelect(key, keyPath) {\n      console.log(key, keyPath);\n    },\n    loginOut() {\n      localStorage.removeItem(\"accountData\");\n      this.$router.push(\"/\");\n      this.$message.error(\"退出登录\");\n    },\n    intoAccountCenter() {\n      if (this.$route.path !== \"/user/accountCenter/accountPosts\") {\n        this.$router.push(\"/user/accountCenter/accountPosts\");\n      }\n    },\n    postInto(postId) {\n      if (this.$route.name === \"帖子详情\") {\n        this.$router.push(\"/user/home\");\n        setTimeout(() => {\n          this.$router.push({\n            name: \"帖子详情\",\n            params: {\n              postId\n            }\n          });\n        }, 1);\n      } else {\n        this.$router.push({\n          name: \"帖子详情\",\n          params: {\n            postId\n          }\n        });\n      }\n    },\n    querySearch(queryString, cb) {\n      this.request.get(\"/post/search?keyword=\" + this.searchContext).then(res => {\n        cb(res.data);\n      });\n    },\n    searchSuggestionSelect(item) {\n      this.postInto(item.postId);\n      this.searchContext = '';\n    }\n  },\n  mounted() {\n    this.$store.dispatch(\"getUserInfo\");\n    const accountData = JSON.parse(localStorage.getItem(\"accountData\"));\n    this.accountData = JSON.parse(localStorage.getItem(\"accountData\"));\n    this.accountData.nickname = accountData ? accountData.nickname || accountData.account : null;\n\n    // if (!this.accountData) {\n    //   this.$router.push(\"/\");\n    //   this.$message.error(\"未检测到登录信息，请先登录\");\n    // }\n  }\n};","map":{"version":3,"names":["mapState","PlayAll","name","components","data","searchContain","activeIndex","$route","path","accountData","searchContext","computed","methods","handleSelect","key","keyPath","console","log","loginOut","localStorage","removeItem","$router","push","$message","error","intoAccountCenter","postInto","postId","setTimeout","params","querySearch","queryString","cb","request","get","then","res","searchSuggestionSelect","item","mounted","$store","dispatch","JSON","parse","getItem","nickname","account"],"sources":["src/components/userComponents/header/UserHeader.vue"],"sourcesContent":["<style scoped>\r\n/* .search-box {\r\n  width: 240px;\r\n  height: 100%;\r\n  float: right;\r\n  margin-top: 10px;\r\n  margin-right: 20%;\r\n} */\r\n\r\n\r\n.title {\r\n  height: 100%;\r\n  font-size: 16px;\r\n\r\n}\r\n\r\n.logo {\r\n  margin-top: 10px;\r\n  height: 60%;\r\n  width: 50px;\r\n\r\n}\r\n\r\n.drop-down {\r\n  width: 116px;\r\n}\r\n\r\n.el-submenu__icon-arrow.el-icon-arrow-down {\r\n  margin-left: 20px;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div>\r\n    <el-menu\r\n        :default-active=\"activeIndex\"\r\n        class=\"el-menu-demo\"\r\n        mode=\"horizontal\"\r\n        style=\"display: flex; flex-direction: row;\"\r\n        @select=\"handleSelect\"\r\n        router\r\n    >\r\n      <div style=\"display: flex;width: 100%;justify-content: space-around;\">\r\n        <div\r\n            class=\"HeadStart\"\r\n            style=\"\r\n          width: auto;\r\n          display: flex;\r\n          flex-direction: row;\r\n          justify-content: start;\r\n          align-items: center;\r\n        \"\r\n        >\r\n          <el-menu-item\r\n              class=\"logo-title\"\r\n              style=\"width: 120px; display: flex; justify-content: flex-start\"\r\n          >\r\n            <img src=\"../../../assets/LOGO1.png\" alt=\"LOGO\" class=\"logo\"/>\r\n            <h3 class=\"title\">栖游集</h3>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/user/home\">首页</el-menu-item>\r\n\r\n          <el-submenu index=\"2\" class=\"drop-down\">\r\n            <template slot=\"title\">创意工坊</template>\r\n            <el-menu-item index=\"/user/chat\">智能顾问</el-menu-item>\r\n            <el-menu-item index=\"/user/recommend\"\r\n            >旅游计划定制与规划\r\n            </el-menu-item\r\n            >\r\n            <el-menu-item index=\"/user/test\">测试</el-menu-item>\r\n            <el-submenu index=\"2-4\">\r\n              <template slot=\"title\">选项4</template>\r\n              <el-menu-item index=\"2-4-1\">选项1</el-menu-item>\r\n              <el-menu-item index=\"2-4-2\">选项2</el-menu-item>\r\n              <el-menu-item index=\"2-4-3\">选项3</el-menu-item>\r\n            </el-submenu>\r\n          </el-submenu>\r\n          <el-menu-item index=\"/user/community\">文旅社区</el-menu-item>\r\n          <el-menu-item index=\"/user/heritage\">非遗之旅</el-menu-item>\r\n          <el-menu-item index=\"/user/shop\">快购好物</el-menu-item>\r\n        </div>\r\n\r\n        <div\r\n            class=\"HeadEnd\"\r\n            style=\"\r\n          width: 55%;\r\n          display: flex;\r\n          justify-content: end;\r\n          align-items: center;\r\n\r\n        \"\r\n        >\r\n          <div style=\"width: 50%;display: flex; flex-direction: row;justify-content: space-around;\">\r\n            <div class=\"search-box\" style=\"display: flex;align-items: center;\">\r\n              <el-autocomplete\r\n                  class=\"inline-input search-input\"\r\n                  v-model=\"searchContext\"\r\n                  :fetch-suggestions=\"querySearch\"\r\n                  placeholder=\"请输入内容\"\r\n                  prefix-icon=\"el-icon-search\"\r\n                  :trigger-on-focus=\"false\"\r\n                  @select=\"searchSuggestionSelect\"\r\n              ></el-autocomplete>\r\n            </div>\r\n            <el-dropdown placement=\"bottom\" v-if=\"accountData\">\r\n              <div style=\"display: flex; align-items: center; cursor: pointer\">\r\n                <el-avatar\r\n                    :size=\"50\"\r\n                    :src=\"accountData.avatar\"\r\n                    v-on:click.native=\"intoAccountCenter\"\r\n                    v-if=\"accountData\"\r\n                ></el-avatar>\r\n                <span style=\"color: black\">{{ accountData.nickname }}</span>\r\n              </div>\r\n              <el-dropdown-menu slot=\"dropdown\">\r\n                <el-dropdown-item v-on:click.native=\"intoAccountCenter\"\r\n                >个人中心\r\n                </el-dropdown-item\r\n                >\r\n                <el-dropdown-item v-on:click.native=\"intoAccountCenter\"\r\n                >修改密码\r\n                </el-dropdown-item\r\n                >\r\n                <el-dropdown-item v-on:click.native=\"loginOut\"\r\n                >退出登录\r\n                </el-dropdown-item\r\n                >\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </el-menu>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {mapState} from \"vuex\";\r\nimport PlayAll from \"@/components/userComponents/home/PlayAll.vue\";\r\n\r\nexport default {\r\n  name: \"UserHeader\",\r\n  components: {PlayAll},\r\n  data() {\r\n    return {\r\n      searchContain: \"\",\r\n      activeIndex: this.$route.path,\r\n      accountData: null,\r\n      searchContext: '',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"userInfo\"]),\r\n  },\r\n  methods: {\r\n    handleSelect(key, keyPath) {\r\n      console.log(key, keyPath);\r\n    },\r\n    loginOut() {\r\n      localStorage.removeItem(\"accountData\");\r\n      this.$router.push(\"/\");\r\n      this.$message.error(\"退出登录\");\r\n    },\r\n    intoAccountCenter() {\r\n      if (this.$route.path !== \"/user/accountCenter/accountPosts\") {\r\n        this.$router.push(\"/user/accountCenter/accountPosts\");\r\n      }\r\n    },\r\n    postInto(postId) {\r\n      if (this.$route.name === \"帖子详情\") {\r\n        this.$router.push(\"/user/home\")\r\n        setTimeout(() => {\r\n          this.$router.push({name: \"帖子详情\", params: {postId}});\r\n        }, 1)\r\n      } else {\r\n        this.$router.push({name: \"帖子详情\", params: {postId}});\r\n      }\r\n    },\r\n    querySearch(queryString, cb) {\r\n      this.request.get(\"/post/search?keyword=\" + this.searchContext).then(res => {\r\n        cb(res.data)\r\n      })\r\n    },\r\n    searchSuggestionSelect(item) {\r\n      this.postInto(item.postId)\r\n      this.searchContext = ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$store.dispatch(\"getUserInfo\");\r\n\r\n    const accountData = JSON.parse(localStorage.getItem(\"accountData\"));\r\n    this.accountData = JSON.parse(localStorage.getItem(\"accountData\"));\r\n    this.accountData.nickname = accountData\r\n        ? accountData.nickname || accountData.account\r\n        : null;\r\n\r\n    // if (!this.accountData) {\r\n    //   this.$router.push(\"/\");\r\n    //   this.$message.error(\"未检测到登录信息，请先登录\");\r\n    // }\r\n  },\r\n};\r\n</script>\r\n\r\n"],"mappings":";AAyIA,SAAAA,QAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,aAAA;MACAC,WAAA,OAAAC,MAAA,CAAAC,IAAA;MACAC,WAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAX,QAAA;EACA;EACAY,OAAA;IACAC,aAAAC,GAAA,EAAAC,OAAA;MACAC,OAAA,CAAAC,GAAA,CAAAH,GAAA,EAAAC,OAAA;IACA;IACAG,SAAA;MACAC,YAAA,CAAAC,UAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;MACA,KAAAC,QAAA,CAAAC,KAAA;IACA;IACAC,kBAAA;MACA,SAAAlB,MAAA,CAAAC,IAAA;QACA,KAAAa,OAAA,CAAAC,IAAA;MACA;IACA;IACAI,SAAAC,MAAA;MACA,SAAApB,MAAA,CAAAL,IAAA;QACA,KAAAmB,OAAA,CAAAC,IAAA;QACAM,UAAA;UACA,KAAAP,OAAA,CAAAC,IAAA;YAAApB,IAAA;YAAA2B,MAAA;cAAAF;YAAA;UAAA;QACA;MACA;QACA,KAAAN,OAAA,CAAAC,IAAA;UAAApB,IAAA;UAAA2B,MAAA;YAAAF;UAAA;QAAA;MACA;IACA;IACAG,YAAAC,WAAA,EAAAC,EAAA;MACA,KAAAC,OAAA,CAAAC,GAAA,gCAAAxB,aAAA,EAAAyB,IAAA,CAAAC,GAAA;QACAJ,EAAA,CAAAI,GAAA,CAAAhC,IAAA;MACA;IACA;IACAiC,uBAAAC,IAAA;MACA,KAAAZ,QAAA,CAAAY,IAAA,CAAAX,MAAA;MACA,KAAAjB,aAAA;IACA;EACA;EACA6B,QAAA;IACA,KAAAC,MAAA,CAAAC,QAAA;IAEA,MAAAhC,WAAA,GAAAiC,IAAA,CAAAC,KAAA,CAAAxB,YAAA,CAAAyB,OAAA;IACA,KAAAnC,WAAA,GAAAiC,IAAA,CAAAC,KAAA,CAAAxB,YAAA,CAAAyB,OAAA;IACA,KAAAnC,WAAA,CAAAoC,QAAA,GAAApC,WAAA,GACAA,WAAA,CAAAoC,QAAA,IAAApC,WAAA,CAAAqC,OAAA,GACA;;IAEA;IACA;IACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}