{"ast":null,"code":"import index from \"vuex\";\nexport default {\n  name: \"Shop\",\n  mounted() {\n    this.getCommodity();\n    this.getCategory();\n    this.getStore();\n  },\n  data() {\n    return {\n      commodityList: [],\n      categoryList: [],\n      storeList: [],\n      num: 1,\n      centerDialogVisible: false,\n      innerVisible: false,\n      commodityInfo: {},\n      page: {\n        pageNum: 1,\n        pageSize: 40,\n        total: 100,\n        commodityTitle: '',\n        categoryName: '',\n        storeName: ''\n      }\n    };\n  },\n  methods: {\n    showCommodityDetails(id, event) {\n      this.centerDialogVisible = true;\n      index = id - this.commodityList[0].commodityId;\n      this.commodityInfo = this.commodityList[index];\n      // alert({...this.commodityInfo})\n      // alert(JSON.stringify(this.commodityInfo))\n    },\n    handleSizeChange(val) {\n      this.page.pageSize = val;\n      this.getCommodity();\n    },\n    handleCurrentChange(val) {\n      this.page.pageNum = val;\n      this.getCommodity();\n    },\n    getCommodity(categoryName, storeName, event) {\n      this.page.categoryName = categoryName;\n      this.page.storeName = storeName;\n      this.request.get(\"/commodity/page\", {\n        params: {\n          pageNum: this.page.pageNum,\n          pageSize: this.page.pageSize,\n          commodityTitle: this.page.commodityTitle,\n          categoryName: categoryName ? categoryName : '',\n          storeName: storeName ? storeName : ''\n        }\n      }).then(res => {\n        this.commodityList = res.data.records;\n        this.page.total = res.data.total;\n      });\n    },\n    getCategory() {\n      this.request.get(\"/category\").then(res => {\n        if (res.code === \"200\") {\n          this.categoryList = res.data;\n        }\n      });\n    },\n    getStore() {\n      this.request.get(\"/store\").then(res => {\n        if (res.code === \"200\") {\n          this.storeList = res.data;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["index","name","mounted","getCommodity","getCategory","getStore","data","commodityList","categoryList","storeList","num","centerDialogVisible","innerVisible","commodityInfo","page","pageNum","pageSize","total","commodityTitle","categoryName","storeName","methods","showCommodityDetails","id","event","commodityId","handleSizeChange","val","handleCurrentChange","request","get","params","then","res","records","code"],"sources":["src/views/userViews/Shop.vue"],"sourcesContent":["<script>\r\n\r\nimport index from \"vuex\";\r\n\r\nexport default {\r\n  name: \"Shop\",\r\n  mounted() {\r\n    this.getCommodity()\r\n    this.getCategory()\r\n    this.getStore()\r\n  },\r\n  data() {\r\n    return {\r\n      commodityList: [],\r\n      categoryList: [],\r\n      storeList: [],\r\n      num: 1,\r\n      centerDialogVisible: false,\r\n      innerVisible: false,\r\n      commodityInfo: {},\r\n      page: {\r\n        pageNum: 1,\r\n        pageSize: 40,\r\n        total: 100,\r\n        commodityTitle: '',\r\n        categoryName: '',\r\n        storeName: '',\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    showCommodityDetails(id, event) {\r\n      this.centerDialogVisible = true\r\n      index = id - this.commodityList[0].commodityId\r\n      this.commodityInfo = this.commodityList[index]\r\n      // alert({...this.commodityInfo})\r\n      // alert(JSON.stringify(this.commodityInfo))\r\n    },\r\n    handleSizeChange(val) {\r\n      this.page.pageSize = val\r\n      this.getCommodity()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.page.pageNum = val\r\n      this.getCommodity()\r\n    },\r\n    getCommodity(categoryName, storeName, event) {\r\n      this.page.categoryName = categoryName\r\n      this.page.storeName = storeName\r\n      this.request.get(\"/commodity/page\", {\r\n        params: {\r\n          pageNum: this.page.pageNum,\r\n          pageSize: this.page.pageSize,\r\n          commodityTitle: this.page.commodityTitle,\r\n          categoryName: categoryName ? categoryName : '',\r\n          storeName: storeName ? storeName : '',\r\n        }\r\n      }).then(res => {\r\n        this.commodityList = res.data.records\r\n        this.page.total = res.data.total\r\n      })\r\n    },\r\n    getCategory() {\r\n      this.request.get(\"/category\").then(res => {\r\n        if (res.code === \"200\") {\r\n          this.categoryList = res.data\r\n        }\r\n      })\r\n    },\r\n    getStore() {\r\n      this.request.get(\"/store\").then(res => {\r\n        if (res.code === \"200\") {\r\n          this.storeList = res.data\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n<style scoped>\r\n.introduce-wrap ul li {\r\n  margin: 10px 0 25px;\r\n}\r\n\r\n.commodity-introduce {\r\n  display: flex;\r\n  width: 1200px;\r\n  margin: 40px auto;\r\n}\r\n\r\n.introduce-img img {\r\n  width: 400px;\r\n  height: 400px;\r\n}\r\n\r\nli {\r\n  list-style: none;\r\n}\r\n\r\n.el-carousel__item h3 {\r\n  color: #475669;\r\n  font-size: 18px;\r\n  opacity: 0.75;\r\n  //line-height: 300px;\r\n  line-height: 300px;\r\n  margin: 0;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n) {\r\n  background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n+1) {\r\n  background-color: #d3dce6;\r\n}\r\n\r\n.shop-show h3 {\r\n  font-size: calc(1.3rem + .6vw);\r\n  width: 200px;\r\n  height: 45px;\r\n  line-height: 45px;\r\n  text-align: center;\r\n  margin: 0 auto 42px;\r\n  font-weight: 600;\r\n  padding: 0 10px;\r\n}\r\n\r\n.shop-show a {\r\n  width: 250px;\r\n  height: 320px;\r\n  background-color: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  text-decoration: none;\r\n  margin: 0 auto;\r\n  transition: all .2s ease-in-out;\r\n}\r\n\r\n.shop-show a:hover {\r\n  box-shadow: 2px 2px 10px #989898;\r\n  transform: scale(1.03) translateY(-5px);\r\n}\r\n\r\n.shop-show ul {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  background-color: #f3f3f3;\r\n  padding: 15px 10px;\r\n}\r\n\r\n.shop-show {\r\n  //margin: 20px 0 30px;\r\n  padding: 20px 10px;\r\n  width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.shop-show .commodity-img img {\r\n  width: 170px;\r\n}\r\n\r\n.commodity-info p {\r\n  width: 200px;\r\n  font-size: 15px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  color: #464646;\r\n}\r\n\r\n.commodity-price {\r\n  color: #e4393c;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.commodity-price span {\r\n  //font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.commodity {\r\n  display: block;\r\n  width: 20%;\r\n  margin: 15px 0;\r\n  padding: 0 10px;\r\n}\r\n\r\n.type {\r\n  width: 1400px;\r\n  margin: 0 auto;\r\n  height: 350px;\r\n  display: flex;\r\n\r\n}\r\n\r\n.type h2 {\r\n  font-size: 24px;\r\n}\r\n\r\n.commodity-type {\r\n  width: 24%;\r\n  height: 100%;\r\n  max-height: 100%;\r\n  margin-right: 1%;\r\n  background-color: #f3f3f3;\r\n  font-size: 24px;\r\n}\r\n\r\n.commodity-type .el-row {\r\n  max-height: 100%;\r\n}\r\n\r\n.store-type {\r\n  width: 24%;\r\n  height: 100%;\r\n  max-height: 100%;\r\n  margin-left: 1%;\r\n  background-color: #f3f3f3;\r\n  font-size: 22px;\r\n}\r\n\r\n.store-type .el-row {\r\n  max-height: 100%;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"outer-box\">\r\n    <!--分类-->\r\n    <div class=\"type\">\r\n      <div class=\"commodity-type\">\r\n        <h2>热门分类</h2>\r\n        <el-row :gutter=\"30\">\r\n          <el-col :span=\"8\" v-for=\"category in categoryList\" :key=\"category.categoryId\">\r\n            <el-link @click=\"getCommodity(category.categoryName,false,$event)\">{{\r\n                category.categoryName\r\n              }}\r\n            </el-link>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <el-carousel :interval=\"5000\" arrow=\"always\" height=\"350px\" style=\"width: 50%\">\r\n        <el-carousel-item v-for=\"item in 4\" :key=\"item\">\r\n          <h3>{{ item }}</h3>\r\n        </el-carousel-item>\r\n      </el-carousel>\r\n      <div class=\"store-type\">\r\n        <h2>热门店铺</h2>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\" v-for=\"store in storeList.slice(0,18)\" :key=\"store.storeId\">\r\n            <el-link type=\"primary\" @click=\"getCommodity(false,store.storeName,$event)\">{{\r\n                store.storeName\r\n              }}\r\n            </el-link>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n    <div class=\"shop-show\">\r\n      <h3>{{ page.storeName || page.categoryName }}</h3>\r\n      <ul>\r\n        <li v-for=\"commodity in commodityList\" :key=\"commodity.commodityId\" class=\"commodity\"\r\n            @click=\"showCommodityDetails(commodity.commodityId,$event)\">\r\n\r\n          <a :title=\"commodity.commodityTitle\">\r\n            <div class=\"commodity-img\">\r\n              <img :src=\"commodity.commodityPicture\">\r\n            </div>\r\n            <div class=\"commodity-info\">\r\n              <p>\r\n                {{ commodity.commodityTitle }}\r\n              </p>\r\n            </div>\r\n            <div class=\"commodity-price\">\r\n              ￥\r\n              <span> {{ commodity.commodityPrice }}</span>\r\n            </div>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <el-pagination\r\n        background\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"page.pageNum\"\r\n        :page-sizes=\"[10, 20,30,40]\"\r\n        :page-size=\"page.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"page.total\"\r\n    >\r\n    </el-pagination>\r\n    <el-dialog\r\n        title=\"提示\"\r\n        :visible.sync=\"centerDialogVisible\"\r\n        width=\"1200px\"\r\n        center>\r\n      <el-dialog\r\n          width=\"30%\"\r\n          title=\"完成支付……\"\r\n          :visible.sync=\"innerVisible\"\r\n          append-to-body\r\n          center\r\n      >\r\n        <strong>请你您支付{{ num * commodityInfo.commodityPrice }}</strong>\r\n        <img src=\"../../assets/wx.png\" style=\"width: 100%\">\r\n      </el-dialog>\r\n      <div class=\"commodity-introduce\">\r\n        <div class=\"introduce-img\">\r\n          <img :src=\"commodityInfo.commodityPicture\">\r\n        </div>\r\n        <div class=\"introduce-wrap\">\r\n          <ul style=\"    padding-left: 2rem;\">\r\n            <li style=\"\">\r\n              <h5 style=\r\n                      \"line-height: 35px;color: #656464;font-size: 1.25rem;margin-top: 0;\r\n                      margin-bottom: 0.5rem;\r\n                      font-weight: 500;\r\n                      display: block;\r\n                      padding-right: 70px;\r\n\"\r\n              > {{ commodityInfo.commodityTitle }}</h5>\r\n            </li>\r\n            <li class=\"itemHint\"\r\n                style=\"    color: #ff595c;\r\n    font-size: 14px;\">店铺：{{ commodityInfo.storeName }}\r\n            </li>\r\n            <li class=\"itemPrice\"\r\n                style=\"color: #e4393c;\r\n    font-size: 18px;\r\n    height: 70px;\r\n    line-height: 70px;\r\n    background-color: #fce5e5;\r\n    padding-left: 20px;\r\n    width: 700px;\r\n\"\r\n            > ￥ <span\r\n                style=\"    font-size: 25px;\r\n    font-weight: 600;\"\r\n            >{{ commodityInfo.commodityPrice }}</span></li>\r\n            <li>\r\n              <el-input-number v-model=\"num\" :step=\"1\" :min=\"1\" step-strictly></el-input-number>\r\n            </li>\r\n            <li>\r\n              <button type=\"button\" class=\"getCar btn\"\r\n                      style=\"    width: 150px;\r\n    height: 50px;\r\n    text-decoration: none;\r\n    border: none;\r\n    color: #fff;\r\n    font-weight: 600;\r\n    font-size: 18px;\r\n    background-color: #f64444;\"\r\n                      @click=\"innerVisible = true\"\r\n              > 预约到店取\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <!--      <span>需要注意的是内容是默认不居中的</span>-->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n<!--    <el-button @click=\"centerDialogVisible = false\">取 消</el-button>-->\r\n        <!--    <el-button type=\"primary\" @click=\"centerDialogVisible = false\">确 定</el-button>-->\r\n  </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n"],"mappings":"AAEA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,QAAA;IACA,KAAAC,YAAA;IACA,KAAAC,WAAA;IACA,KAAAC,QAAA;EACA;EACAC,KAAA;IACA;MACAC,aAAA;MACAC,YAAA;MACAC,SAAA;MACAC,GAAA;MACAC,mBAAA;MACAC,YAAA;MACAC,aAAA;MACAC,IAAA;QACAC,OAAA;QACAC,QAAA;QACAC,KAAA;QACAC,cAAA;QACAC,YAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,qBAAAC,EAAA,EAAAC,KAAA;MACA,KAAAb,mBAAA;MACAX,KAAA,GAAAuB,EAAA,QAAAhB,aAAA,IAAAkB,WAAA;MACA,KAAAZ,aAAA,QAAAN,aAAA,CAAAP,KAAA;MACA;MACA;IACA;IACA0B,iBAAAC,GAAA;MACA,KAAAb,IAAA,CAAAE,QAAA,GAAAW,GAAA;MACA,KAAAxB,YAAA;IACA;IACAyB,oBAAAD,GAAA;MACA,KAAAb,IAAA,CAAAC,OAAA,GAAAY,GAAA;MACA,KAAAxB,YAAA;IACA;IACAA,aAAAgB,YAAA,EAAAC,SAAA,EAAAI,KAAA;MACA,KAAAV,IAAA,CAAAK,YAAA,GAAAA,YAAA;MACA,KAAAL,IAAA,CAAAM,SAAA,GAAAA,SAAA;MACA,KAAAS,OAAA,CAAAC,GAAA;QACAC,MAAA;UACAhB,OAAA,OAAAD,IAAA,CAAAC,OAAA;UACAC,QAAA,OAAAF,IAAA,CAAAE,QAAA;UACAE,cAAA,OAAAJ,IAAA,CAAAI,cAAA;UACAC,YAAA,EAAAA,YAAA,GAAAA,YAAA;UACAC,SAAA,EAAAA,SAAA,GAAAA,SAAA;QACA;MACA,GAAAY,IAAA,CAAAC,GAAA;QACA,KAAA1B,aAAA,GAAA0B,GAAA,CAAA3B,IAAA,CAAA4B,OAAA;QACA,KAAApB,IAAA,CAAAG,KAAA,GAAAgB,GAAA,CAAA3B,IAAA,CAAAW,KAAA;MACA;IACA;IACAb,YAAA;MACA,KAAAyB,OAAA,CAAAC,GAAA,cAAAE,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAE,IAAA;UACA,KAAA3B,YAAA,GAAAyB,GAAA,CAAA3B,IAAA;QACA;MACA;IACA;IACAD,SAAA;MACA,KAAAwB,OAAA,CAAAC,GAAA,WAAAE,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAE,IAAA;UACA,KAAA1B,SAAA,GAAAwB,GAAA,CAAA3B,IAAA;QACA;MACA;IACA;EAEA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}